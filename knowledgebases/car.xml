<?xml version="1.0"?>
<knowledge>
	<title>Which program should I enter?</title>
	<description>This is an example to show you some of the features of the inference engine.</description>

	<!-- 
	The goal of our program is to give one advice: what is wrong with your car.

	Note the goal name parameter: this is the name of the fact that the solver will try to deduce. Each answer has a value which that fact can have.

	The value $undefined is assigned to a fact if the solver cannot find any way to deduce a value for the fact, i.e. there are no rules (left) that are applicable nor any questions.

	The last answer has no value parameter. This one will match anything that is not matched by any of the previous answers. In the text associated with that answer the variable $program is used. You can use the fact name with $ in front of it in pretty much any context to get the value of that fact. Here it is replaced with whatever the value of the fact program is.

	Note that $undefined is also a variable, as it should be the value of the fact 'undefined' in the knowledge base: that is what we try to match.

	If none of the answer-clauses match, and there is no fallback answer-clause without a value, the system won't know what to print and not show the goal at all. You can use this to make an advisor like system by making all possible advises seperate goals and only providing an answer for when that goal is 'yes' or 'true' or whatever value you conceive for a certain advice being applicable.
	-->
	<goal name="identified_problem">
		<answer value="blocked wheels">The wheels are blocked, possibly by the hand-brake.</answer>
		<answer value="breaking disks">The breaking disks are deteriorated.</answer>
		<answer value="manual gearbox">The problem is your gear box.</answer>
		<answer value="automatic gearbox">The problem is your automatic transmission.</answer>
		<answer value="$undefined">I don't know what you should do, sorryâ€¦</answer>
		<answer>Something else, namely .</answer>
	</goal>

	<!--
	These rule cases are pretty self explaining. The description is more for the programmer than for the user of the QA system: it is only displayed in the debug and analyse views. However, it is really useful to determine which rule is misbehaving and what it should do instead.

	You can have multiple <fact>-clauses in your <then>-clause, but it can only be <fact>-clauses. You can not add rules or questions dynamically in this way.

	If you have multiple tests in your <if>-clause, you should immediately start with an <and> or <or>-clause. And of course you can combine them. The <fact>-clauses test whether a fact with that name has the value.

	In the <fact> clauses you can use variables for both the name argument and the value. It will then use the value of that fact you are referring to as if it has been there instead. If that fact you use as a variable is not yet derived, the solver will do that for you.
	-->

<!--  Rules -->
<rule>
    <description>If the care does not start with a sound, it is an issue with the electromotor.</description>  
    <if>
        <and>
            <fact name="problem">Does Not Start</fact>
            <fact name="start_with_sound">No</fact>
        </and>
    </if>
    <then>
        <fact name="identified_problem">The electromotor is fo' sho. [change this]</fact>
    </then>
</rule>

<rule>
    <description>If engine stalls when driving backwards, wheels are blocked</description>  
    <if>
        <and>
            <fact name="problem">Engine stalling</fact>
            <fact name="engine_stalling_backwards">Yes</fact>
        </and>
    </if>
    <then>
        <fact name="identified_problem">The wheels are blocked</fact>
    </then>
</rule>

<rule>
    <description>If you only hear the sound when braking, braking discs are deteriorated</description>  
    <if>
        <and>
            <fact name="problem">Makes weird noises</fact>
            <fact name="when_weird_sound">When braking</fact>
        </and>
    </if>
    <then>
        <fact name="identified_problem">breaking disks</fact>
    </then>
</rule>

<rule>
    <description>[To be changed] If you have problems with your manual gearbox, then it is your transmission.</description>  
    <if>
        <and>
            <fact name="problem">Gearbox not working</fact>
            <fact name="type_gearbox">Manual</fact>
        </and>
    </if>
    <then>
        <fact name="identified_problem">manual gearbox</fact>
    </then>
</rule>

<rule>
    <description>[To be changed] If you have problems with your automatic gearbox, then it is your transmission.</description>  
    <if>
        <and>
            <fact name="problem">Gearbox not working</fact>
            <fact name="type_gearbox">Automatic</fact>
        </and>
    </if>
    <then>
        <fact name="identified_problem">automatic gearbox</fact>
    </then>
</rule>

<!-- Questions -->

<question>
        <description>What is wrong with your car?</description>
        <option>
            <description>It doesn't start.</description>
            <then>
                <fact name="problem">Does not start</fact>
            </then>
        </option>
        <option>
            <description>It makes weird noises.</description>
            <then>
                <fact name="problem">Makes weird noises</fact>
            </then>
        </option>
        <option>
            <description>The wheels wear down too fast.</description>
            <then>
                <fact name="problem">Wheels wear down</fact>
            </then>
        </option>
        <option>
            <description>Poor Fuel Economy</description>
            <then>
                <fact name="problem">Fuel economy</fact>
            </then>
        </option>
        <option>
            <description>The coolant temperature is too high.</description>
            <then>
                <fact name="problem">Coolant temperature</fact>
            </then>
        </option>
        <option>
            <description>The engine stalls.</description>
            <then>
                <fact name="problem">Engine stalling</fact>
            </then>
        </option>
        <option>
            <description>My gearbox is not working properly.</description>
            <then>
                <fact name="problem">Gearbox not working</fact>
            </then>
        </option>
        <option>
            <description>Steering wheel vibrates.</description>
            <then>
                <fact name="problem">Steering wheel vibrating</fact>
            </then>
        </option>
    </question>
 
   <question>
      <description>Do you have a manual or an automatic gearbox?</description> 
      <option>
         <description>I have a manual.</description>
         <then>
            <fact name="type_gearbox">Manual</fact>
         </then>
      </option>
      <option>
         <description>I have an automatic</description>
         <then>
            <fact name="type_gearbox">Automatic</fact>
         </then>
      </option>
   </question>
 
   <question>
      <description>Does the car make a sound when you try to start it?</description> 
      <option>
         <description>It sounds like it is starting, but it fails.</description>
         <then>
            <fact name="start_with_sound">Yes</fact>
         </then>
      </option>
      <option>
         <description>It does not make any sound.</description>
         <then>
            <fact name="start_with_sound">No</fact>
         </then>
      </option>
 
   </question>
 
   <question>
      <description>Does the engine stall when you drive backwards?</description> 
      <option>
         <description>Yes</description>
         <then>
            <fact name="engine_stalls_backwards">Yes</fact>
         </then>
      </option>
      <option>
         <description>No</description>
         <then>
            <fact name="engine_stalls_backwards">No</fact>
         </then>
      </option>
   </question>
 
    <question>
        <description>Have you changed the battery in the last 3 years?</description>
        <option>
            <description>I changed it recently.</description>
            <then>
                <fact name="old_battery">No</fact>
            </then>
        </option>
        <option>
            <description>I changed it 2 to 3 years ago.</description>
            <then>
                <fact name="old_battery">Possibly</fact>
            </then>
        </option>
        <option>
            <description>I have not changed it for more than 3 years.</description>
            <then>
                <fact name="old_battery">Yes</fact>
            </then>
        </option>
      </question>
 
    <question>
        <description>[Asked if answer to old_battery is possibly] Did you forget your lights on when the car was off?</description>
        <option>
            <description>No.</description>
            <then>
                <fact name="depleted_battery">No</fact>
            </then>
        </option>
        <option>
            <description>Yes, but less than five hours.</description>
            <then>
                <fact name="depleted_battery">Possibly</fact>
            </then>
        </option>
        <option>
            <description>Yes, for more than five hours.</description>
            <then>
                <fact name="depleted_battery">Yes</fact>
            </then>
        </option>
    </question>
 
    <question>
        <description>[Asked if answer to depleted_battery is no or possibly] Is there a green dot visible on your battery?</description>
        <option>
            <description>Yes.</description>
            <then>
                <fact name="green_dot">Yes</fact>
            </then>
        </option>
        <option>
            <description>The indicator is dark green and the dot is not there.</description>
            <then>
                <fact name="green_dot">Should charge</fact>
            </then>
        </option>
        <option>
            <description>The dot is clear or yellow.</description>
            <then>
                <fact name="green_dot">Replace battery</fact>
            </then>
        </option>
	
        <option>
	<description> I do not have an indicator.</description>
	<then>
		<fact name="green_dot">Unknown</fact>
	</then>
         </option>
    </question>
 
    
	<question>
		<description>[Asked if Does not start -- not sure if correctly placed (ask Expert)] Is your car key functioning normally?</description>
		<option>
			<description>The car does not unlock when using the key.</description>
			<then>
				<fact name="car_key">dead</fact>
			</then>
		</option>
		<option>
			<description>The car key works sometimes.</description>
			<then>
				<fact name="car_key">almost dead</fact>
			</then>
		</option>
		<option>
			<description>Yes.</description>
			<then>
				<fact name="car_key">works</fact>
			</then>
		</option>
    </question> 
	
 
   <question>
      <description>When do you hear the weird noise?</description> 
      <option>
         <description>Only when I brake.</description>
         <then>
            <fact name="when_weird_sound">When braking</fact>
         </then>
      </option>
      <option>
         <description>Always when I am driving.</description>
         <then>
            <fact name="when_weird_sounds">Always</fact>
         </then>
      </option>
   </question>

   <question>
      <description>What does the noise sound like?</description> 
      <option>
         <description>It sounds like something is hit with an iron hammer.</description>
         <then>
            <fact name="what_sound">Iron hammer</fact>
         </then>
      </option>
      <option>
         <description>It sounds like a constant rumbling.</description>
         <then>
            <fact name="what_sound">Rumbling</fact>
         </then>
      </option>
   </question>

</knowledge>